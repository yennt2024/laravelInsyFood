!function(t){t.fn.quicksand=function(e,i){var s={duration:750,easing:"swing",attribute:"data-id",adjustHeight:"auto",useScaling:!0,enhancement:function(t){},selector:"> *",dx:0,dy:0};if(t.extend(s,i),(t.browser.msie||void 0===t.fn.scale)&&(s.useScaling=!1),"function"==typeof arguments[1])var a=arguments[1];else{a=arguments[2]}return this.each((function(i){var o,n,l=[],r=t(e).clone(),f=t(this),p=t(this).css("height"),h=!1,c=t(f).offset(),u=[],y=t(this).find(s.selector);if(t.browser.msie&&t.browser.version.substr(0,1)<7)f.html("").append(r);else{var g=0,m=function(){g||(g=1,$toDelete=f.find("> *"),f.prepend(F.find("> *")),$toDelete.remove(),h&&f.css("height",n),s.enhancement(f),"function"==typeof a&&a.call(this))},b=f.offsetParent(),v=b.offset();"relative"==b.css("position")?"body"==b.get(0).nodeName.toLowerCase()||(v.top+=parseFloat(b.css("border-top-width"))||0,v.left+=parseFloat(b.css("border-left-width"))||0):(v.top-=parseFloat(b.css("border-top-width"))||0,v.left-=parseFloat(b.css("border-left-width"))||0,v.top-=parseFloat(b.css("margin-top"))||0,v.left-=parseFloat(b.css("margin-left"))||0),isNaN(v.left)&&(v.left=0),isNaN(v.top)&&(v.top=0),v.left-=s.dx,v.top-=s.dy,f.css("height",t(this).height()),y.each((function(e){u[e]=t(this).offset()})),t(this).stop();var x=0,w=0;y.each((function(e){t(this).stop();var i=t(this).get(0);"absolute"==i.style.position?(x=-s.dx,w=-s.dy):(x=s.dx,w=s.dy),i.style.position="absolute",i.style.margin="0",i.style.top=u[e].top-parseFloat(i.style.marginTop)-v.top+w+"px",i.style.left=u[e].left-parseFloat(i.style.marginLeft)-v.left+x+"px"}));var F=t(f).clone(),S=F.get(0);for(S.innerHTML="",S.setAttribute("id",""),S.style.height="auto",S.style.width=f.width()+"px",F.append(r),F.insertBefore(f),F.css("opacity",0),S.style.zIndex=-1,S.style.margin="0",S.style.position="absolute",S.style.top=c.top-v.top+"px",S.style.left=c.left-v.left+"px","dynamic"===s.adjustHeight?f.animate({height:F.height()},s.duration,s.easing):"auto"===s.adjustHeight&&(n=F.height(),parseFloat(p)<parseFloat(n)?f.css("height",n):h=!0),y.each((function(e){var i=[];"function"==typeof s.attribute?(o=s.attribute(t(this)),r.each((function(){if(s.attribute(this)==o)return i=t(this),!1}))):i=r.filter("["+s.attribute+"="+t(this).attr(s.attribute)+"]"),i.length?s.useScaling?l.push({element:t(this),animation:{top:i.offset().top-v.top,left:i.offset().left-v.left,opacity:1,scale:"1.0"}}):l.push({element:t(this),animation:{top:i.offset().top-v.top,left:i.offset().left-v.left,opacity:1}}):s.useScaling?l.push({element:t(this),animation:{opacity:"0.0",scale:"0.0"}}):l.push({element:t(this),animation:{opacity:"0.0"}})})),r.each((function(e){var i,a=[],n=[];if("function"==typeof s.attribute?(o=s.attribute(t(this)),y.each((function(){if(s.attribute(this)==o)return a=t(this),!1})),r.each((function(){if(s.attribute(this)==o)return n=t(this),!1}))):(a=y.filter("["+s.attribute+"="+t(this).attr(s.attribute)+"]"),n=r.filter("["+s.attribute+"="+t(this).attr(s.attribute)+"]")),0===a.length){i=s.useScaling?{opacity:"1.0",scale:"1.0"}:{opacity:"1.0"},d=n.clone();var p=d.get(0);p.style.position="absolute",p.style.margin="0",p.style.top=n.offset().top-v.top+"px",p.style.left=n.offset().left-v.left+"px",d.css("opacity",0),s.useScaling&&d.css("transform","scale(0.0)"),d.appendTo(f),l.push({element:t(d),animation:i})}})),F.remove(),s.enhancement(f),i=0;i<l.length;i++)l[i].element.animate(l[i].animation,s.duration,s.easing,m)}}))}}(jQuery);
